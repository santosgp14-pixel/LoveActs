<!doctype html>
<html lang="es">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        
        <!-- PWA Meta Tags -->
        <meta name="theme-color" content="#ec4899" />
        <meta name="background-color" content="#fdf2f8" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="default" />
        <meta name="apple-mobile-web-app-title" content="LoveActs" />
        <meta name="mobile-web-app-capable" content="yes" />
        <meta name="format-detection" content="telephone=no" />
        
        <!-- SEO and Description -->
        <meta name="description" content="LoveActs - AplicaciÃ³n romÃ¡ntica para parejas que registran y califican actos de amor diarios, con estados de Ã¡nimo y recuerdos especiales. Fortalece tu relaciÃ³n dÃ­a a dÃ­a." />
        <meta name="keywords" content="amor, pareja, relaciÃ³n, romÃ¡ntico, actos de amor, estado de Ã¡nimo, recuerdos, romance" />
        <meta name="author" content="LoveActs Team" />
        
        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://loveacts.app" />
        <meta property="og:title" content="LoveActs - Actos de Amor Diarios" />
        <meta property="og:description" content="AplicaciÃ³n romÃ¡ntica para parejas que registran y califican actos de amor diarios" />
        <meta property="og:image" content="/images/og-image.png" />
        
        <!-- Twitter -->
        <meta property="twitter:card" content="summary_large_image" />
        <meta property="twitter:url" content="https://loveacts.app" />
        <meta property="twitter:title" content="LoveActs - Actos de Amor Diarios" />
        <meta property="twitter:description" content="AplicaciÃ³n romÃ¡ntica para parejas que registran y califican actos de amor diarios" />
        <meta property="twitter:image" content="/images/twitter-image.png" />
        
        <!-- PWA Manifest -->
        <link rel="manifest" href="/manifest.json" />
        
        <!-- Favicon and Icons -->
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <link rel="icon" type="image/svg+xml" sizes="32x32" href="/favicon.svg" />
        <link rel="shortcut icon" href="/favicon.svg" />
        
        <!-- Apple Touch Icons -->
        <link rel="apple-touch-icon" href="/images/icon-192x192.svg" />
        <link rel="apple-touch-icon" sizes="180x180" href="/images/icon-192x192.svg" />
        
        <!-- Microsoft Tiles -->
        <meta name="msapplication-TileColor" content="#ec4899" />
        <meta name="msapplication-TileImage" content="/images/ms-icon-144x144.png" />
        <meta name="msapplication-config" content="/browserconfig.xml" />
        
        <!-- Preload Critical Resources -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        
        <title>LoveActs - Actos de Amor Diarios ðŸ’•</title>
        
        <!-- Critical CSS -->
        <style>
            /* Critical loading styles */
            .loading-screen {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: linear-gradient(135deg, #fce7f3 0%, #ffffff 50%, #dbeafe 100%);
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            }
            .loading-logo {
                font-size: 4rem;
                margin-bottom: 1rem;
                animation: pulse 2s infinite;
            }
            .loading-title {
                font-size: 2rem;
                font-weight: bold;
                color: #ec4899;
                margin-bottom: 0.5rem;
            }
            .loading-subtitle {
                color: #6b7280;
                font-size: 0.875rem;
                margin-bottom: 2rem;
            }
            .loading-spinner {
                width: 40px;
                height: 40px;
                border: 4px solid #fce7f3;
                border-top: 4px solid #ec4899;
                border-radius: 50%;
                animation: spin 1s linear infinite;
            }
            @keyframes pulse {
                0%, 100% { transform: scale(1); opacity: 1; }
                50% { transform: scale(1.1); opacity: 0.8; }
            }
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            /* Hide main content until loaded */
            #root { opacity: 0; transition: opacity 0.3s ease; }
            .app-loaded #root { opacity: 1; }
            .app-loaded .loading-screen { display: none; }
        </style>
    </head>
    <body>
        <!-- Loading Screen -->
        <div class="loading-screen" id="loadingScreen">
            <div class="loading-logo">ðŸ’•</div>
            <h1 class="loading-title">LoveActs</h1>
            <p class="loading-subtitle">âœ¨ Cargando tu app de amor...</p>
            <div class="loading-spinner"></div>
        </div>
        
        <noscript>
            <div style="
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                min-height: 100vh;
                background: linear-gradient(135deg, #fce7f3 0%, #ffffff 50%, #dbeafe 100%);
                font-family: -apple-system, BlinkMacSystemFont, sans-serif;
                text-align: center;
                padding: 2rem;
            ">
                <div style="font-size: 4rem; margin-bottom: 1rem;">ðŸ’•</div>
                <h1 style="color: #ec4899; margin-bottom: 1rem;">LoveActs</h1>
                <p style="color: #6b7280; max-width: 400px;">
                    Necesitas activar JavaScript en tu navegador para usar LoveActs.
                    Esta aplicaciÃ³n requiere JavaScript para funcionar correctamente.
                </p>
            </div>
        </noscript>
        
        <div id="root"></div>
        
        <!-- PWA Installation Script -->
        <script>
            // PWA Installation and Service Worker Registration
            let deferredPrompt;
            let isInstalled = false;
            
            // Check if app is installed
            if (window.matchMedia('(display-mode: standalone)').matches || 
                window.navigator.standalone === true) {
                isInstalled = true;
                document.body.classList.add('installed-app');
            }
            
            // Hide loading screen when app is ready
            window.addEventListener('DOMContentLoaded', () => {
                setTimeout(() => {
                    document.body.classList.add('app-loaded');
                }, 1000);
            });
            
            // Service Worker Registration
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('/sw.js')
                        .then((registration) => {
                            console.log('ðŸ’• Service Worker registrado exitosamente:', registration.scope);
                            
                            // Check for updates
                            registration.addEventListener('updatefound', () => {
                                const newWorker = registration.installing;
                                newWorker.addEventListener('statechange', () => {
                                    if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                        // New version available
                                        showUpdateNotification();
                                    }
                                });
                            });
                        })
                        .catch((error) => {
                            console.log('ðŸ’” Service Worker fallÃ³:', error);
                        });
                });
            }
            
            // PWA Install Prompt
            window.addEventListener('beforeinstallprompt', (e) => {
                console.log('ðŸ’• Prompt de instalaciÃ³n disponible');
                e.preventDefault();
                deferredPrompt = e;
                
                if (!isInstalled) {
                    showInstallButton();
                }
            });
            
            // Show install button
            function showInstallButton() {
                // This will be called from React app when ready
                window.loveActsInstallPrompt = deferredPrompt;
            }
            
            // Show update notification
            function showUpdateNotification() {
                if (window.loveActsShowUpdateNotification) {
                    window.loveActsShowUpdateNotification();
                } else {
                    // Fallback notification
                    if (confirm('ðŸ’• Nueva versiÃ³n de LoveActs disponible. Â¿Actualizar ahora?')) {
                        window.location.reload();
                    }
                }
            }
            
            // Track installation
            window.addEventListener('appinstalled', (evt) => {
                console.log('ðŸ’• LoveActs instalada exitosamente');
                isInstalled = true;
                document.body.classList.add('installed-app');
                
                // Analytics event (if available)
                if (window.gtag) {
                    gtag('event', 'app_installed', {
                        method: 'pwa'
                    });
                }
            });
            
            // Handle offline/online status
            window.addEventListener('online', () => {
                console.log('ðŸ’• ConexiÃ³n restaurada');
                if (window.loveActsOnlineStatusChanged) {
                    window.loveActsOnlineStatusChanged(true);
                }
            });
            
            window.addEventListener('offline', () => {
                console.log('ðŸ“µ Sin conexiÃ³n - modo offline');
                if (window.loveActsOnlineStatusChanged) {
                    window.loveActsOnlineStatusChanged(false);
                }
            });
            
            // Prevent zoom on iOS
            document.addEventListener('touchstart', function (event) {
                if (event.touches.length > 1) {
                    event.preventDefault();
                }
            }, { passive: false });
            
            let lastTouchEnd = 0;
            document.addEventListener('touchend', function (event) {
                const now = (new Date()).getTime();
                if (now - lastTouchEnd <= 300) {
                    event.preventDefault();
                }
                lastTouchEnd = now;
            }, false);
            
            console.log('ðŸ’• LoveActs PWA inicializada');
        </script>
        
        <!-- Remove Emergent badge for PWA version -->
    </body>
</html>
